<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="/styles/csshake.min.css">
    <link rel="stylesheet" type="text/css" href="/styles/zenburn.css">
    <link rel="stylesheet" type="text/css" href="/styles/planspace.css">
    <title>GPU environment variables</title>
  </head>
  <body>
    <article>
<h1>GPU environment variables</h1>
<p class="date">Thursday September 10, 2020</p>
<p><code>CUDA_DEVICE_ORDER</code> can default to <code>FASTEST_FIRST</code>, which may not
match the order you see in <code>nvidia-smi</code> output. Use
<code>CUDA_DEVICE_ORDER=PCI_BUS_ID</code>.</p>
<p>Set <code>CUDA_VISIBLE_DEVICES=2</code> to only run on GPU 2. That GPU will then
be accessed as GPU 0, not GPU 2.</p>
<p>When using TensorFlow, you <a href="https://www.tensorflow.org/guide/gpu#limiting_gpu_memory_growth">can</a> set
<code>TF_FORCE_GPU_ALLOW_GROWTH=true</code> to keep TF from preemptively claiming
all the GPU memory. However, in my tests (with the older version 1.14)
TF still allocates way more memory than it really needs, so this
setting doesn't help much in practice.</p>    </article>
    <footer>
      <hr />
<p>If you sign up, I'll send you an email update at most monthly with new stuff.</p>
<iframe src="https://planspace.substack.com/embed" width="100%" frameborder="0" scrolling="no"></iframe>
<p><a id="back_link2" href="/">This site</a> also has <a href="/rss.xml">RSS</a>. You can connect with <a id="aaron_link2" href="/aaron/">me</a> via <a href="https://twitter.com/planarrowspace">Twitter</a>, <a href="https://www.linkedin.com/in/ajschumacher">LinkedIn</a>, <a href="https://github.com/ajschumacher">GitHub</a>, and <a href="mailto:aaron@planspace.org">email</a>.</p>

      <hr />
    </footer>

<!-- my weird stuff -->
<script src="/scripts/planspace.js"></script>

<!-- syntax highlighting -->
<script src="/scripts/highlight.pack.js"></script>
<script type="text/javascript">hljs.initHighlightingOnLoad();</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EZBQMHT77F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-EZBQMHT77F');
</script>

<!-- Disqus comments -->
<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'planspace';
  (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

  </body>
</html>
